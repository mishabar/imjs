!function t(e, i, n) { function o(s, c) { if (!i[s]) { if (!e[s]) { var a = "function" == typeof require && require; if (!c && a) return a(s, !0); if (r) return r(s, !0); var d = new Error("Cannot find module '" + s + "'"); throw d.code = "MODULE_NOT_FOUND", d } var u = i[s] = { exports: {} }; e[s][0].call(u.exports, function (t) { var i = e[s][1][t]; return o(i || t) }, u, u.exports, t, e, i, n) } return i[s].exports } for (var r = "function" == typeof require && require, s = 0; s < n.length; s++)o(n[s]); return o }({ 1: [function (t, e, i) { "use strict"; function n(t, e, i) { } function o(t, e, i) { Object.defineProperty(t, e, { writable: !1, configurable: !1, value: i }) } var r = ["handshakeVersion", "initAd", "startAd", "stopAd", "skipAd", "resizeAd", "pauseAd", "resumeAd", "expandAd", "collapseAd", "subscribe", "unsubscribe"], s = ["AdLoaded", "AdStarted", "AdStopped", "AdSkipped", "AdSkippableStateChange", "AdSizeChange", "AdLinearChange", "AdDurationChange", "AdExpandedChange", "AdRemainingTimeChange", "AdVolumeChange", "AdImpression", "AdVideoStart", "AdVideoFirstQuartile", "AdVideoMidpoint", "AdVideoThirdQuartile", "AdVideoComplete", "AdClickThru", "AdInteraction", "AdUserAcceptInvitation", "AdUserMinimize", "AdUserClose", "AdPaused", "AdPlaying", "AdLog", "AdError"], c = ["getAdLinear", "getAdWidth", "getAdHeight", "getAdExpanded", "getAdSkippableState", "getAdRemainingTime", "getAdDuration", "getAdVolume", "getAdCompanions", "getAdIcons"], a = ["setAdVolume"]; n.prototype.handshakeVersion = function (t, e) { }, n.prototype.initAd = function (t, e, i, n, o, r, s) { }, n.prototype.startAd = function (t) { }, n.prototype.stopAd = function (t) { }, n.prototype.skipAd = function (t) { }, n.prototype.resizeAd = function (t, e, i, n) { }, n.prototype.pauseAd = function (t) { }, n.prototype.resumeAd = function (t) { }, n.prototype.expandAd = function (t) { }, n.prototype.collapseAd = function (t) { }, n.prototype.subscribe = function (t, e, i) { }, n.prototype.unsubscribe = function (t, e) { }, n.prototype.getAdLinear = function (t) { }, n.prototype.getAdWidth = function (t) { }, n.prototype.getAdHeight = function (t) { }, n.prototype.getAdExpanded = function (t) { }, n.prototype.getAdSkippableState = function (t) { }, n.prototype.getAdRemainingTime = function (t) { }, n.prototype.getAdDuration = function (t) { }, n.prototype.getAdVolume = function (t) { }, n.prototype.getAdCompanions = function (t) { }, n.prototype.getAdIcons = function (t) { }, n.prototype.setAdVolume = function (t, e) { }, o(n, "METHODS", r), o(n, "GETTERS", c), o(n, "SETTERS", a), o(n, "EVENTS", s); var d = r.filter(function (t) { return -1 === ["skipAd"].indexOf(t) }); o(n, "checkVPAIDInterface", function (t) { return d.every(function (e) { return "function" == typeof t[e] }) }), e.exports = n }, {}], 2: [function (t, e, i) { "use strict"; function n(t, e, i, n) { this._isValid = u(t), this._isValid && (this._creative = t, this._el = e, this._videoEl = i, this._iframe = n, this._subscribers = new d, p.setFullSizeStyle(e), o.call(this)) } function o() { if (h.forEach(function (t) { this._creative.subscribe(s.bind(this, t), t) }.bind(this)), this._creative.subscribe(r.bind(this), f), this._videoEl) { var t = this._iframe.contentDocument.documentElement, e = this._videoEl; t.addEventListener("click", function (i) { i.target === t && e.click() }) } } function r(t, e, i) { this._subscribers.triggerSync(f, { url: t, id: e, playerHandles: i }) } function s(t) { this._subscribers.trigger(t, Array.prototype.slice(arguments, 1)) } function c(t, e, i, n) { t ? t(i, n) : i && e.trigger(l, i) } var a = t("./IVPAIDAdUnit"), d = t("./subscriber"), u = a.checkVPAIDInterface, p = t("./utils"), l = (a.METHODS, "AdError"), f = "AdClickThru", h = a.EVENTS.filter(function (t) { return t != f }); (n.prototype = Object.create(a.prototype)).isValidVPAIDAd = function () { return this._isValid }, a.METHODS.forEach(function (t) { -1 === ["subscribe", "unsubscribe", "initAd"].indexOf(t) && (n.prototype[t] = function () { var e = a.prototype[t].length, i = Array.prototype.slice.call(arguments), n = e === i.length ? i.pop() : void 0; setTimeout(function () { var e, o = null; try { e = this._creative[t].apply(this._creative, i) } catch (t) { o = t } c(n, this._subscribers, o, e) }.bind(this), 0) }) }), n.prototype.initAd = function (t, e, i, n, o, r, s) { o = o || {}, r = p.extend({ slot: this._el, videoSlot: this._videoEl }, r || {}), setTimeout(function () { var a; try { this._creative.initAd(t, e, i, n, o, r) } catch (t) { a = t } c(s, this._subscribers, a) }.bind(this), 0) }, n.prototype.subscribe = function (t, e, i) { this._subscribers.subscribe(e, t, i) }, n.prototype.unsubscribe = function (t, e) { this._subscribers.unsubscribe(e, t) }, n.prototype.on = n.prototype.subscribe, n.prototype.off = n.prototype.unsubscribe, a.GETTERS.forEach(function (t) { n.prototype[t] = function (e) { setTimeout(function () { var i, n = null; try { i = this._creative[t]() } catch (t) { n = t } c(e, this._subscribers, n, i) }.bind(this), 0) } }), n.prototype.setAdVolume = function (t, e) { setTimeout(function () { var i, n = null; try { this._creative.setAdVolume(t), i = this._creative.getAdVolume() } catch (t) { n = t } n || (n = p.validate(i <= t, "failed to apply volume: " + t)), c(e, this._subscribers, n, i) }.bind(this), 0) }, n.prototype._destroy = function () { this.stopAd(), this._subscribers.unsubscribeAll() }, e.exports = n }, { "./IVPAIDAdUnit": 1, "./subscriber": 4, "./utils": 5 }], 3: [function (t, e, i) { "use strict"; function n(t, e, i, n) { i = i || {}, this._id = f(), this._destroyed = !1, this._frameContainer = l.createElementInEl(t, "div"), this._videoEl = e, this._vpaidOptions = n || { timeout: 1e4 }, this._templateConfig = { template: i.template || A, extraOptions: i.extraOptions || {} } } function o(t) { var e = this[t]; e && (e.remove(), delete this[t]) } function r() { c.call(this), delete this._adUnit } function s() { c.call(this), d.call(this) } function c() { o.call(this, "_frame"), a.call(this) } function a() { this._onLoad && (window.removeEventListener("message", this._onLoad), delete this._onLoad) } function d() { this._adUnit && (this._adUnit.stopAd(), delete this._adUnit) } function u() { if (this._destroyed) throw new Error("VPAIDHTML5Client already destroyed!") } function p() { return window.location.origin ? window.location.origin : window.location.protocol + "//" + window.location.hostname + (window.location.port ? ":" + window.location.port : "") } var l = t("./utils"), f = l.unique("vpaidIframe"), h = t("./VPAIDAdUnit"), A = '<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"></head><body style="margin:0;padding:0"><div class="ad-element"></div><script type="text/javascript" src="{{iframeURL_JS}}"><\/script><script type="text/javascript">window.parent.postMessage(\'{"event": "ready", "id": "{{iframeID}}"}\', \'{{origin}}\');<\/script></body></html>', y = "AdStopped"; n.prototype.destroy = function () { this._destroyed || (this._destroyed = !0, s.call(this)) }, n.prototype.isDestroyed = function () { return this._destroyed }, n.prototype.loadAdUnit = function (t, e) { if (!this._onLoad) { u.call(this), s.call(this); var i = this, n = l.createIframeWithContent(this._frameContainer, this._templateConfig.template, l.extend({ iframeURL_JS: t, iframeID: this.getID(), origin: p() }, this._templateConfig.extraOptions)); this._frame = n, this._onLoad = l.callbackTimeout(this._vpaidOptions.timeout, function (t) { if (t.origin === p() && JSON.parse(t.data).id === i.getID()) { var n, o, s; if (i._frame.contentWindow ? (s = i._frame.contentWindow.getVPAIDAd, o = l.validate("function" == typeof s, "the ad didn't return a function to create an ad")) : o = "the iframe is not anymore in the DOM tree", !o) { var c = i._frame.contentWindow.document.querySelector(".ad-element"); (n = new h(s(), c, i._videoEl, i._frame)).subscribe(y, r.bind(i)), o = l.validate(n.isValidVPAIDAd(), "the add is not fully complaint with VPAID specification") } return i._adUnit = n, a.call(i), e(o, o ? null : n), !0 } }.bind(this), function () { e("timeout", null) }.bind(this)), window.addEventListener("message", this._onLoad) } }, n.prototype.unloadAdUnit = function () { s.call(this) }, n.prototype.getID = function () { return this._id }, e.exports = n, window.VPAIDHTML5Client = n }, { "./VPAIDAdUnit": 2, "./utils": 5 }], 4: [function (t, e, i) { "use strict"; function n() { this._subscribers = {} } n.prototype.subscribe = function (t, e, i) { this.isHandlerAttached(t, e) || this.get(e).push({ handler: t, context: i, eventName: e }) }, n.prototype.unsubscribe = function (t, e) { this._subscribers[e] = this.get(e).filter(function (e) { return t !== e.handler }) }, n.prototype.unsubscribeAll = function () { this._subscribers = {} }, n.prototype.trigger = function (t, e) { var i = this; this.get(t).concat(this.get("*")).forEach(function (t) { setTimeout(function () { i.isHandlerAttached(t.handler, t.eventName) && t.handler.call(t.context, e) }, 0) }) }, n.prototype.triggerSync = function (t, e) { this.get(t).concat(this.get("*")).forEach(function (t) { t.handler.call(t.context, e) }) }, n.prototype.get = function (t) { return this._subscribers[t] || (this._subscribers[t] = []), this._subscribers[t] }, n.prototype.isHandlerAttached = function (t, e) { return this.get(e).some(function (e) { return t === e.handler }) }, e.exports = n }, {}], 5: [function (t, e, i) { "use strict"; function n() { } function o(t, e, i) { var n = document.createElement("iframe"); return n.src = e || "about:blank", n.marginWidth = "0", n.marginHeight = "0", n.frameBorder = "0", n.width = "100%", n.height = "100%", r(n), i && (n.style.zIndex = i), n.setAttribute("SCROLLING", "NO"), t.innerHTML = "", t.appendChild(n), n } function r(t) { t && (t.style.position = "absolute", t.style.left = "0", t.style.top = "0", t.style.margin = "0px", t.style.padding = "0px", t.style.border = "none", t.style.width = "100%", t.style.height = "100%") } function s(t, e) { return Object.keys(e).forEach(function (i) { var n = "object" == typeof n ? JSON.stringify(e[i]) : e[i]; t = t.replace(new RegExp("{{" + i + "}}", "g"), n) }), t } function c(t, e) { var i = t.contentWindow && t.contentWindow.document; return !!i && (i.write(e), !0) } e.exports = { noop: n, validate: function (t, e) { return t ? null : new Error(e) }, callbackTimeout: function (t, e, i) { var o; return o = setTimeout(function () { e = n, i() }, t), function () { e.apply(this, arguments) && clearTimeout(o) } }, createElementInEl: function (t, e, i) { var n = document.createElement(e); return i && (n.id = i), t.appendChild(n), n }, createIframeWithContent: function (t, e, i) { var n = o(t, null, i.zIndex); if (c(n, s(e, i))) return n }, createIframe: o, setFullSizeStyle: r, simpleTemplate: s, setIframeContent: c, extend: function (t, e) { return Object.keys(e).forEach(function (i) { t[i] = e[i] }), t }, unique: function (t) { var e = -1; return function () { return t + "_" + ++e } } } }, {}] }, {}, [3]); !function t(e, i, n) { function o(s, c) { if (!i[s]) { if (!e[s]) { var a = "function" == typeof require && require; if (!c && a) return a(s, !0); if (r) return r(s, !0); var d = new Error("Cannot find module '" + s + "'"); throw d.code = "MODULE_NOT_FOUND", d } var u = i[s] = { exports: {} }; e[s][0].call(u.exports, function (t) { var i = e[s][1][t]; return o(i || t) }, u, u.exports, t, e, i, n) } return i[s].exports } for (var r = "function" == typeof require && require, s = 0; s < n.length; s++)o(n[s]); return o }({ 1: [function (t, e, i) { "use strict"; function n(t, e, i) { } function o(t, e, i) { Object.defineProperty(t, e, { writable: !1, configurable: !1, value: i }) } var r = ["handshakeVersion", "initAd", "startAd", "stopAd", "skipAd", "resizeAd", "pauseAd", "resumeAd", "expandAd", "collapseAd", "subscribe", "unsubscribe"], s = ["AdLoaded", "AdStarted", "AdStopped", "AdSkipped", "AdSkippableStateChange", "AdSizeChange", "AdLinearChange", "AdDurationChange", "AdExpandedChange", "AdRemainingTimeChange", "AdVolumeChange", "AdImpression", "AdVideoStart", "AdVideoFirstQuartile", "AdVideoMidpoint", "AdVideoThirdQuartile", "AdVideoComplete", "AdClickThru", "AdInteraction", "AdUserAcceptInvitation", "AdUserMinimize", "AdUserClose", "AdPaused", "AdPlaying", "AdLog", "AdError"], c = ["getAdLinear", "getAdWidth", "getAdHeight", "getAdExpanded", "getAdSkippableState", "getAdRemainingTime", "getAdDuration", "getAdVolume", "getAdCompanions", "getAdIcons"], a = ["setAdVolume"]; n.prototype.handshakeVersion = function (t, e) { }, n.prototype.initAd = function (t, e, i, n, o, r, s) { }, n.prototype.startAd = function (t) { }, n.prototype.stopAd = function (t) { }, n.prototype.skipAd = function (t) { }, n.prototype.resizeAd = function (t, e, i, n) { }, n.prototype.pauseAd = function (t) { }, n.prototype.resumeAd = function (t) { }, n.prototype.expandAd = function (t) { }, n.prototype.collapseAd = function (t) { }, n.prototype.subscribe = function (t, e, i) { }, n.prototype.unsubscribe = function (t, e) { }, n.prototype.getAdLinear = function (t) { }, n.prototype.getAdWidth = function (t) { }, n.prototype.getAdHeight = function (t) { }, n.prototype.getAdExpanded = function (t) { }, n.prototype.getAdSkippableState = function (t) { }, n.prototype.getAdRemainingTime = function (t) { }, n.prototype.getAdDuration = function (t) { }, n.prototype.getAdVolume = function (t) { }, n.prototype.getAdCompanions = function (t) { }, n.prototype.getAdIcons = function (t) { }, n.prototype.setAdVolume = function (t, e) { }, o(n, "METHODS", r), o(n, "GETTERS", c), o(n, "SETTERS", a), o(n, "EVENTS", s); var d = r.filter(function (t) { return -1 === ["skipAd"].indexOf(t) }); o(n, "checkVPAIDInterface", function (t) { return d.every(function (e) { return "function" == typeof t[e] }) }), e.exports = n }, {}], 2: [function (t, e, i) { "use strict"; function n(t, e, i, n) { this._isValid = u(t), this._isValid && (this._creative = t, this._el = e, this._videoEl = i, this._iframe = n, this._subscribers = new d, p.setFullSizeStyle(e), o.call(this)) } function o() { if (h.forEach(function (t) { this._creative.subscribe(s.bind(this, t), t) }.bind(this)), this._creative.subscribe(r.bind(this), f), this._videoEl) { var t = this._iframe.contentDocument.documentElement, e = this._videoEl; t.addEventListener("click", function (i) { i.target === t && e.click() }) } } function r(t, e, i) { this._subscribers.triggerSync(f, { url: t, id: e, playerHandles: i }) } function s(t) { this._subscribers.trigger(t, Array.prototype.slice(arguments, 1)) } function c(t, e, i, n) { t ? t(i, n) : i && e.trigger(l, i) } var a = t("./IVPAIDAdUnit"), d = t("./subscriber"), u = a.checkVPAIDInterface, p = t("./utils"), l = (a.METHODS, "AdError"), f = "AdClickThru", h = a.EVENTS.filter(function (t) { return t != f }); (n.prototype = Object.create(a.prototype)).isValidVPAIDAd = function () { return this._isValid }, a.METHODS.forEach(function (t) { -1 === ["subscribe", "unsubscribe", "initAd"].indexOf(t) && (n.prototype[t] = function () { var e = a.prototype[t].length, i = Array.prototype.slice.call(arguments), n = e === i.length ? i.pop() : void 0; setTimeout(function () { var e, o = null; try { e = this._creative[t].apply(this._creative, i) } catch (t) { o = t } c(n, this._subscribers, o, e) }.bind(this), 0) }) }), n.prototype.initAd = function (t, e, i, n, o, r, s) { o = o || {}, r = p.extend({ slot: this._el, videoSlot: this._videoEl }, r || {}), setTimeout(function () { var a; try { this._creative.initAd(t, e, i, n, o, r) } catch (t) { a = t } c(s, this._subscribers, a) }.bind(this), 0) }, n.prototype.subscribe = function (t, e, i) { this._subscribers.subscribe(e, t, i) }, n.prototype.unsubscribe = function (t, e) { this._subscribers.unsubscribe(e, t) }, n.prototype.on = n.prototype.subscribe, n.prototype.off = n.prototype.unsubscribe, a.GETTERS.forEach(function (t) { n.prototype[t] = function (e) { setTimeout(function () { var i, n = null; try { i = this._creative[t]() } catch (t) { n = t } c(e, this._subscribers, n, i) }.bind(this), 0) } }), n.prototype.setAdVolume = function (t, e) { setTimeout(function () { var i, n = null; try { this._creative.setAdVolume(t), i = this._creative.getAdVolume() } catch (t) { n = t } n || (n = p.validate(i <= t, "failed to apply volume: " + t)), c(e, this._subscribers, n, i) }.bind(this), 0) }, n.prototype._destroy = function () { this.stopAd(), this._subscribers.unsubscribeAll() }, e.exports = n }, { "./IVPAIDAdUnit": 1, "./subscriber": 4, "./utils": 5 }], 3: [function (t, e, i) { "use strict"; function n(t, e, i, n) { i = i || {}, this._id = f(), this._destroyed = !1, this._frameContainer = l.createElementInEl(t, "div"), this._videoEl = e, this._vpaidOptions = n || { timeout: 1e4 }, this._templateConfig = { template: i.template || A, extraOptions: i.extraOptions || {} } } function o(t) { var e = this[t]; e && (e.remove(), delete this[t]) } function r() { c.call(this), delete this._adUnit } function s() { c.call(this), d.call(this) } function c() { o.call(this, "_frame"), a.call(this) } function a() { this._onLoad && (window.removeEventListener("message", this._onLoad), delete this._onLoad) } function d() { this._adUnit && (this._adUnit.stopAd(), delete this._adUnit) } function u() { if (this._destroyed) throw new Error("VPAIDHTML5Client already destroyed!") } function p() { return window.location.origin ? window.location.origin : window.location.protocol + "//" + window.location.hostname + (window.location.port ? ":" + window.location.port : "") } var l = t("./utils"), f = l.unique("vpaidIframe"), h = t("./VPAIDAdUnit"), A = '<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests;"></head><body style="margin:0;padding:0"><div class="ad-element"></div><script type="text/javascript" src="{{iframeURL_JS}}"><\/script><script type="text/javascript">window.parent.postMessage(\'{"event": "ready", "id": "{{iframeID}}"}\', \'{{origin}}\');<\/script></body></html>', y = "AdStopped"; n.prototype.destroy = function () { this._destroyed || (this._destroyed = !0, s.call(this)) }, n.prototype.isDestroyed = function () { return this._destroyed }, n.prototype.loadAdUnit = function (t, e) { if (!this._onLoad) { u.call(this), s.call(this); var i = this, n = l.createIframeWithContent(this._frameContainer, this._templateConfig.template, l.extend({ iframeURL_JS: t, iframeID: this.getID(), origin: p() }, this._templateConfig.extraOptions)); this._frame = n, this._onLoad = l.callbackTimeout(this._vpaidOptions.timeout, function (t) { if (t.origin === p() && JSON.parse(t.data).id === i.getID()) { var n, o, s; if (i._frame.contentWindow ? (s = i._frame.contentWindow.getVPAIDAd, o = l.validate("function" == typeof s, "the ad didn't return a function to create an ad")) : o = "the iframe is not anymore in the DOM tree", !o) { var c = i._frame.contentWindow.document.querySelector(".ad-element"); (n = new h(s(), c, i._videoEl, i._frame)).subscribe(y, r.bind(i)), o = l.validate(n.isValidVPAIDAd(), "the add is not fully complaint with VPAID specification") } return i._adUnit = n, a.call(i), e(o, o ? null : n), !0 } }.bind(this), function () { e("timeout", null) }.bind(this)), window.addEventListener("message", this._onLoad) } }, n.prototype.unloadAdUnit = function () { s.call(this) }, n.prototype.getID = function () { return this._id }, e.exports = n, window.VPAIDHTML5Client = n }, { "./VPAIDAdUnit": 2, "./utils": 5 }], 4: [function (t, e, i) { "use strict"; function n() { this._subscribers = {} } n.prototype.subscribe = function (t, e, i) { this.isHandlerAttached(t, e) || this.get(e).push({ handler: t, context: i, eventName: e }) }, n.prototype.unsubscribe = function (t, e) { this._subscribers[e] = this.get(e).filter(function (e) { return t !== e.handler }) }, n.prototype.unsubscribeAll = function () { this._subscribers = {} }, n.prototype.trigger = function (t, e) { var i = this; this.get(t).concat(this.get("*")).forEach(function (t) { setTimeout(function () { i.isHandlerAttached(t.handler, t.eventName) && t.handler.call(t.context, e) }, 0) }) }, n.prototype.triggerSync = function (t, e) { this.get(t).concat(this.get("*")).forEach(function (t) { t.handler.call(t.context, e) }) }, n.prototype.get = function (t) { return this._subscribers[t] || (this._subscribers[t] = []), this._subscribers[t] }, n.prototype.isHandlerAttached = function (t, e) { return this.get(e).some(function (e) { return t === e.handler }) }, e.exports = n }, {}], 5: [function (t, e, i) { "use strict"; function n() { } function o(t, e, i) { var n = document.createElement("iframe"); return n.src = e || "about:blank", n.marginWidth = "0", n.marginHeight = "0", n.frameBorder = "0", n.width = "100%", n.height = "100%", n.sandbox = "allow-scripts allow-same-origin allow-popups", r(n), i && (n.style.zIndex = i), n.setAttribute("SCROLLING", "NO"), t.innerHTML = "", t.appendChild(n), n } function r(t) { t && (t.style.position = "absolute", t.style.left = "0", t.style.top = "0", t.style.margin = "0px", t.style.padding = "0px", t.style.border = "none", t.style.width = "100%", t.style.height = "100%") } function s(t, e) { return Object.keys(e).forEach(function (i) { var n = "object" == typeof n ? JSON.stringify(e[i]) : e[i]; t = t.replace(new RegExp("{{" + i + "}}", "g"), n) }), t } function c(t, e) { var i = t.contentWindow && t.contentWindow.document; return !!i && (i.write(e), !0) } e.exports = { noop: n, validate: function (t, e) { return t ? null : new Error(e) }, callbackTimeout: function (t, e, i) { var o; return o = setTimeout(function () { e = n, i() }, t), function () { e.apply(this, arguments) && clearTimeout(o) } }, createElementInEl: function (t, e, i) { var n = document.createElement(e); return i && (n.id = i), t.appendChild(n), n }, createIframeWithContent: function (t, e, i) { var n = o(t, null, i.zIndex); if (c(n, s(e, i))) return n }, createIframe: o, setFullSizeStyle: r, simpleTemplate: s, setIframeContent: c, extend: function (t, e) { return Object.keys(e).forEach(function (i) { t[i] = e[i] }), t }, unique: function (t) { var e = -1; return function () { return t + "_" + ++e } } } }, {}] }, {}, [3]);

Player=function(c,f,g,k,n,p){function q(t,u){if(!t.sent)for(var v in t.sent=!0,t.links)new Image().src=t.links[v]+(u||'')+'&__g='+(player.group||'')+'&__ts='+Date.now()}this.bid_id=k,this.ad_id=p,this.width=f,this.height=g,this.currentVASTAd=null,this.currentVPAIDAd=null,this.group=n||'0',this.vpaidTimeout=15e3,this.getTrackingEvents=function(t,u){var v={Impression:{sent:!1,links:[]},Error:{sent:!1,links:[]},Start:{sent:!1,links:[]},FirstQuarter:{sent:!1,links:[]},Midpoint:{sent:!1,links:[]},ThirdQuarter:{sent:!1,links:[]},Complete:{sent:!1,links:[]},Click:{sent:!1,links:[]},Empty:{sent:!1,links:[]},Skipped:{sent:!1,links:[]}},y=t.querySelectorAll('InLine Impression');if(v.Impression.links.push('https://vast.integral-marketing.com/api/v1/waterfall/shown?token='+u),y)for(var z=0;z<y.length;z++)y[z].firstChild&&v.Impression.links.push(y[z].firstChild.wholeText.trim());if(y=t.querySelectorAll('InLine Error'),v.Error.links.push('https://vast.integral-marketing.com/api/v1/waterfall/error?token='+u),y)for(var z=0;z<y.length;z++)y[z].firstChild&&v.Error.links.push(y[z].firstChild.wholeText.trim());if(y=t.querySelectorAll('InLine TrackingEvents Tracking[event="start"]'),v.Start.links.push('https://bid.integral-marketing.com/v20/event/'+this.bid_id+'?src=im&name=adstart&banner_id='+this.ad_id),v.Start.links.push('https://vast.integral-marketing.com/api/v1/waterfall/started?token='+u),y)for(var z=0;z<y.length;z++)y[z].firstChild&&v.Start.links.push(y[z].firstChild.wholeText.trim());if(y=t.querySelectorAll('InLine TrackingEvents Tracking[event="firstQuartile"]'),y)for(var z=0;z<y.length;z++)y[z].firstChild&&v.FirstQuarter.links.push(y[z].firstChild.wholeText.trim());if(y=t.querySelectorAll('InLine TrackingEvents Tracking[event="midpoint"]'),v.Midpoint.links.push('https://vast.integral-marketing.com/api/v1/waterfall/middle?token='+u),y)for(var z=0;z<y.length;z++)y[z].firstChild&&v.Midpoint.links.push(y[z].firstChild.wholeText.trim());if(y=t.querySelectorAll('InLine TrackingEvents Tracking[event="thirdQuartile"]'),y)for(var z=0;z<y.length;z++)y[z].firstChild&&v.ThirdQuarter.links.push(y[z].firstChild.wholeText.trim());if(y=t.querySelectorAll('InLine TrackingEvents Tracking[event="complete"]'),v.Complete.links.push('https://bid.integral-marketing.com/v20/event/'+this.bid_id+'?src=im&name=adcomplete&banner_id='+this.ad_id),v.Complete.links.push('https://vast.integral-marketing.com/api/v1/waterfall/completed?token='+u),y)for(var z=0;z<y.length;z++)y[z].firstChild&&v.Complete.links.push(y[z].firstChild.wholeText.trim());if(v.Click.links.push('https://vast.integral-marketing.com/api/v1/waterfall/clicked?token='+u),y=t.querySelectorAll('InLine VideoClicks ClickTracking'),y)for(var z=0;z<y.length;z++)y[z].firstChild&&v.Click.links.push(y[z].firstChild.wholeText.trim());return y=t.querySelectorAll('InLine VideoClicks ClickThrough'),y&&y[0]&&(v.ClickThrough=y[0].firstChild.wholeText.trim()),v.Empty.links.push('https://vast.integral-marketing.com/api/v1/waterfall/empty?token='+u),v.Skipped.links.push('https://vast.integral-marketing.com/api/v1/waterfall/skipped?token='+u),v},this.isVPAIDloading=function(){return this.currentVPAIDAd&&this.currentVPAIDAd.vpaid&&!this.currentVPAIDAd.tracking.Start.sent},this.prepareVPAIDAd=function(t){for(var v=null,y=null,z=t.xml.querySelectorAll('MediaFile'),A=0;A<z.length&&!v;A++)('application/javascript'!=z[A].attributes.type.value||z[A].attributes.apiFramework&&'VPAID'===z[A].attributes.apiFramework.value)&&(v=z[A].firstChild.wholeText.trim(),y=z[A].parentNode.parentNode.querySelector('AdParameters').firstChild.wholeText.trim());t.tracking=this.getTrackingEvents(t.xml,t.token);var B=document.getElementById('players'),C=new VPAIDHTML5Client(B,document.getElementById('gv'),{},{timeout:this.vpaidTimeout});t.vpaid=C,this.currentVPAIDAd=t,C._frameContainer.style.position='absolute',C._frameContainer.style.width=player.width+'px',C._frameContainer.style.height=player.height+'px',C._frameContainer.style.zIndex=-1,C.loadAdUnit(v.replace(/^http:/,'https:'),function(D,E){if(D)return void clearAd();try{function F(J){try{var K=new XMLHttpRequest;K.open('POST','https://videos.integral-marketing.com/videos/adlog',!0),K.setRequestHeader('Content-Type','application/json'),K.send(JSON.stringify({log:J,ad_id:player.bid_id}))}catch(L){}}function G(){t&&(t.vpaid&&(t.vpaid._videoEl&&(t.vpaid_videoEl.style.backgroundColor='transparent',t.vpaid._videoEl.src=null),t.vpaid.destroy()),player.currentVPAIDAd=null,player.loadingVPAID=0,player.adPlaying=!1)}E.subscribe('AdLoaded',function(){t.adUnit=E,t.adUnit.startAd(function(J){J&&(player.currentVPAIDAd&&player.currentVPAIDAd.tracking&&q(player.currentVPAIDAd.tracking.Error),G(player.currentVPAIDAd))})}),E.subscribe('AdStarted',function(){try{player.currentVPAIDAd.vpaid._frameContainer.style.zIndex=1,q(player.currentVPAIDAd.tracking.Start,'&interval='+(Date.now()-player.currentVPAIDAd.n)),queue.retryVPAIDAd(player.currentVPAIDAd.id),clearTimeout(player.currentVPAIDAd.$h)}catch(J){F(J.stack),G()}}),E.subscribe('AdStopped',function(){try{player.currentVPAIDAd&&clearTimeout(player.currentVPAIDAd.$h),G()}catch(J){F(J.stack),G()}}),E.subscribe('AdSkipped',function(){try{q(player.currentVPAIDAd.tracking.Skipped)}catch(J){F(J.stack),G()}}),E.subscribe('AdImpression',function(){try{player.currentVPAIDAd&&(player.currentVPAIDAd.vpaid._frameContainer.style.zIndex=1,clearTimeout(player.currentVPAIDAd.$h)),q(player.currentVPAIDAd.tracking.Impression)}catch(J){F(J.stack),G()}}),E.subscribe('AdClickThru',function(){try{q(player.currentVPAIDAd.tracking.Click),window.open(player.currentVPAIDAd.tracking.ClickThrough)}catch(K){F(K.stack),G()}}),E.subscribe('AdVideoStart',function(){try{player.currentVPAIDAd&&(player.currentVPAIDAd.adUnit._videoEl.src&&(player.currentVPAIDAd.adUnit._videoEl.style.backgroundColor='#000'),player.currentVPAIDAd.vpaid._frameContainer.style.zIndex=1,clearTimeout(player.currentVPAIDAd.$h)),q(player.currentVPAIDAd.tracking.Start,'&interval='+(Date.now()-player.currentVPAIDAd.n)),q(player.currentVPAIDAd.tracking.Impression)}catch(J){F(J.stack),G()}}),E.subscribe('AdVideoFirstQuartile',function(){try{player.currentVPAIDAd.tracking.Start.sent&&q(player.currentVPAIDAd.tracking.FirstQuarter)}catch(J){F(J.stack),G()}}),E.subscribe('AdVideoMidpoint',function(){try{player.currentVPAIDAd.tracking.Start.sent&&q(player.currentVPAIDAd.tracking.Midpoint)}catch(J){F(J.stack),G()}}),E.subscribe('AdVideoThirdQuartile',function(){try{player.currentVPAIDAd.tracking.Start.sent&&q(player.currentVPAIDAd.tracking.ThirdQuarter)}catch(J){F(J.stack),G()}}),E.subscribe('AdVideoComplete',function(){try{player.currentVPAIDAd.tracking.Start.sent&&q(player.currentVPAIDAd.tracking.Complete)}catch(J){F(J.stack),G()}}),E.subscribe('AdError',function(){try{player.currentVPAIDAd&&(clearTimeout(player.currentVPAIDAd.$h),player.currentVPAIDAd.tracking&&q(player.currentVPAIDAd.tracking.Start.sent?player.currentVPAIDAd.tracking.Error:player.currentVPAIDAd.tracking.Empty,'&interval='+(Date.now()-player.currentVPAIDAd.n))),G()}catch(J){F(J.stack),G()}}),E.subscribe('AdLog',function(J){F(J)}),E.handshakeVersion('2.0',function(){E.initAd(player.width,player.height,'normal',-1,{AdParameters:y},{},function(L){L&&(t&&t.tracking&&q(t.tracking.Error),G())})}),t.$h=setTimeout(function(){G()},player.vpaidTimeout,t),t.n=Date.now()}catch(F){logData(F.stack)}})},this.playAd=function(t){this.adPlaying=!0;try{if('VAST'===t.type){for(var u=[],v=t.xml.querySelectorAll('MediaFile'),y=0;y<v.length;y++)'video/x-flv'!=v[y].attributes.type.value&&u.push({url:v[y].firstChild.wholeText.trim(),width:v[y].attributes.width.value,height:v[y].attributes.height.value,mimetype:v[y].attributes.type.value});this.currentVASTAd={tracking:this.getTrackingEvents(t.xml,t.token),videos:u,id:t.id,type:'VAST',price:t.price};var z=function(){0.25<=this.currentTime/this.duration&&q(player.currentVASTAd.tracking.FirstQuarter),0.5<=this.currentTime/this.duration&&q(player.currentVASTAd.tracking.Midpoint),0.75<=this.currentTime/this.duration&&q(player.currentVASTAd.tracking.ThirdQuarter)},A=function(){player.currentVASTAd&&player.currentVASTAd.jsv&&document.getElementById('players').removeChild(player.currentVASTAd.jsv),player.currentVASTAd=null,player.adPlaying=!1},B=function(){player.currentVASTAd&&player.currentVASTAd.video&&document.getElementById('players').removeChild(player.currentVASTAd.video),player.currentVASTAd=null,player.adPlaying=!1},C=function(E,F,G){var H=document.createElement('video');H.style.backgroundColor='black';var I=function(){q(player.currentVASTAd.tracking.Click),window.open(player.currentVASTAd.tracking.ClickThrough),this.removeEventListener('click',I)};H.addEventListener('click',I),player.currentVASTAd.video=H,H.addEventListener('error',function(){q(player.currentVASTAd.tracking.Error),B()},!1),H.addEventListener('timeupdate',z.bind(H),!1),H.addEventListener('ended',function(){q(player.currentVASTAd.tracking.Complete),B()},!1),H.addEventListener('canplay',function(){clearTimeout(player.currentVASTAd.$h),q(player.currentVASTAd.tracking.Start,'&price='+player.currentVASTAd.price),q(player.currentVASTAd.tracking.Impression)}.bind(H),!1),H.style.width=F+'px',H.style.height=G+'px',H.setAttribute('muted',''),H.setAttribute('autoplay',''),H.setAttribute('playsinline','');for(var J=0;!H.src&&J<E.videos.length;)H.canPlayType(E.videos[J].mimetype)&&(H.src=E.videos[J].url),J++;H.src?document.getElementById('players').appendChild(H):(q(player.currentVASTAd.tracking.Error),B())},D=function(E,F,G,H){var I=new XMLHttpRequest,J=this;I.open('GET','https://videos.integral-marketing.com/videos/x/'+encodeURIComponent(E.videos[F].url),!0),I.onload=function(){var L=JSON.parse(I.responseText);if(L&&L.ready&&L.jsv){var M=new video_jsv,N=function(){q(player.currentVASTAd.tracking.Click),window.open(player.currentVASTAd.tracking.ClickThrough),this.removeEventListener('click',N)};M.addEventListener('click',N),document.getElementById('players').appendChild(M),player.currentVASTAd.jsv=M,M.addEventListener('error',function(){q(player.currentVASTAd.tracking.Error,'&err=jsv_player_err'),A()},!1),M.addEventListener('timeupdate',z.bind(M),!1),M.addEventListener('ended',function(){q(player.currentVASTAd.tracking.Complete),A()},!1),M.addEventListener('canplay',function(){clearTimeout(player.currentVASTAd.$h),this.play(),q(player.currentVASTAd.tracking.Start,'&price='+player.currentVASTAd.price),q(player.currentVASTAd.tracking.Impression)}.bind(M),!1),M.setAttribute('preload','auto'),M.style.width=G+'px',M.style.height=H+'px',M.setAttribute('src',L.jsv),M.muted=!0,player.currentVASTAd.$h=setTimeout(function(){player.currentVASTAd&&player.currentVASTAd.tracking&&!player.currentVASTAd.tracking.Start.sent&&q(player.currentVASTAd.tracking.Error,'&err=jsv_cant_play&__data='+encodeURIComponent(this.src)),A()}.bind(M),1e4)}else L.error?(F++,links.length>F?setTimeout(D.bind(this),0,E,F,G,H):(q(player.currentVASTAd.tracking.Error,'&err=out_of_media'),A())):setTimeout(D.bind(this),0,E,F,G,H)},I.onerror=function(){F++,links.length>F?setTimeout(D.bind(this),0,E,F,G,H):(q(player.currentVASTAd.tracking.Error,'&err=out_of_media'),A())},I.send(null)};/(iPhone|iPad)/.test(navigator.userAgent)?C(this.currentVASTAd,this.width,this.height):D(this.currentVASTAd,0,this.width,this.height)}else'VPAID'===t.type&&(this.loadingVPAID=1,this.prepareVPAIDAd(t))}catch(E){this.currentVASTAd&&this.currentVASTAd.jsv&&this.currentVASTAd.jsv.parentElement&&this.currentVASTAd.jsv.parentElement.removeChild(this.currentVASTAd.jsv),this.currentVPAIDAd&&this.currentVPAIDAd.vpaid&&this.currentVPAIDAd.vpaid.destroy(),this.adPlaying=!1,this.currentVPAIDAd=null,this.loadingVPAID=0,this.currentVASTAd=null}}},Downloader=function(){this.downloadAdDefinition=function(c,f){var g=c.url,k=!1,n=null,p=this,q=new XMLHttpRequest,t=g.replace(/\[CB\]/i,Date.now()).replace(/\[\w+\]&/gi,'&').replace(/%7B\w+%7D&/gi,'&');q.open('GET',t,!0),q.timeout=5e3,q.onload=function(){if(200===this.status&&this.responseXML){for(var v=null,y=this.responseXML.querySelectorAll('MediaFile'),z=0;z<y.length&&!k;z++)v||'video/x-flv'==y[z].attributes.type.value||(v=y[z],k=!0,n='application/javascript'===y[z].attributes.type.value||y[z].attributes.apiFramework&&'VPAID'===y[z].attributes.apiFramework.value?'VPAID':'VAST');if(f){var A=!1;k||(A=null!=this.responseXML.querySelector('Extensions Error')),f(c,!1,k?{id:c.id,xml:this.responseXML,type:n,price:c.p}:null,A)}}else 200!=this.status&&f(c,!0,null)},q.onerror=function(){f&&f(c,!1,null)},q.ontimeout=function(){f&&f(c,!0,null,null,!0)},q.send(null)}},Queue=function(c,f,g,k,n){this.player=c,this.stage=0,this.options=Object.assign({maxVasts:1,maxVpaids:5},n||{}),this.vasts=[],this.vpaids=[],this.loadingAds=!1,this.links={loaded:!1,vpaid:{sources:[],loaded:0,rh:null,open:!1},vast:{sources:[],loaded:0,p:0,rh:null,open:!1}},this.d=new Downloader,this.cycle=0,this.vpCycle=0,this.linksPerCycle=f||5,this.maxCycleTimeout=g||5e4,this.timeoutAnchor=k||1e4,this.$h=0,this.linksToLoad=[],this.isEmpty=function(){return 0==this.vasts.length&&(null==this.player.currentVASTAd||this.player.currentVASTAd.tracking.Midpoint.sent||null==this.player.currentVPAIDAd||this.player.currentVPAIDAd.tracking.Midpoint.sent)},this.fullOfVPAIDs=function(){return this.vpaids.length>=this.options.maxVpaids},this.retryVPAIDAd=function(p){var q=this.links.vpaid.sources.filter(function(t){return t.id===p});q.length&&(q[0].loaded=q[0].stop=0)},this.remove=function(p){this.vpaids.splice(this.vpaids.indexOf(p),1)},this.nextAd=function(){var p=null;return this.vasts.length?p=this.vasts.splice(0,1):this.vpaids.length&&!c.currentVPAIDAd&&this.vpaids.length&&(p=this.vpaids.splice(0,1)),p?p[0]:null},this.isOnQueue=function(p){return 0<this.vasts.filter(function(q){return q.id===p}).length},this.resetQueue=function(p){for(var q=0;q<p.sources.length;q++)p.sources[q].loaded=p.sources[q].stop=!1;p.loaded=p.p=0,p.r=p.s,p.rh=null,this.stage=1},this.downloadAdDefinitions=function(){this.links.vast.sources.length&&0!=this.cycle%8||(this.stage=1);var p=[],q=this,t=this.links.vast,u=0;if(this.linksToLoad=this.linksToLoad.filter(function(z){return!z.stop}),this.linksToLoad.length<this.linksPerCycle&&(u=this.linksToLoad.length,this.linksToLoad=t.sources.filter(function(z){return!z.stop&&z.o}).filter(function(){return u++<q.linksPerCycle}),t.sources.filter(function(z){return!z.stop&&z.o}).length||this.resetQueue({sources:t.sources.filter(function(z){return z.stop&&z.o})}),this.linksToLoad.length<this.linksPerCycle)){u=this.linksToLoad.length,this.linksToLoad=this.linksToLoad.concat(t.sources.filter(function(z){return!z.stop&&!z.o}).filter(function(){return u++<q.linksPerCycle}));var v=t.sources.filter(function(z){return!z.stop&&!z.o});v.length||this.resetQueue({sources:t.sources.filter(function(z){return z.stop&&!z.o})})}if(!this.linksToLoad.length)queue.loadingAds=0,setTimeout(q.loadAds.bind(q),Math.min(q.maxCycleTimeout,q.timeoutAnchor*(q.cycle/5)));else{for(var y,u=0;u<this.linksToLoad.length;u++)y=this.linksToLoad[u],p.push(new Promise(function(z){q.d.downloadAdDefinition(y,function(A,B,C,D,E){this.links[A.type.toLowerCase()].loaded++,A.loaded=1,new Image().src='https://vast.integral-marketing.com/api/v1/waterfall/opportunity?token='+A.token+'&_cb='+Date.now()+'&__g='+c.group,E?new Image().src='https://vast.integral-marketing.com/api/v1/waterfall/timeout?token='+A.token+'&_cb='+Date.now()+'&__g='+c.group:B?(A.stop=1,new Image().src='https://vast.integral-marketing.com/api/v1/waterfall/error?token='+A.token+'&_cb='+Date.now()+'&__g='+c.group):C?(C.token=A.token,this[C.type.toLowerCase()+'s'].push(C),new Image().src='https://vast.integral-marketing.com/api/v1/waterfall/responded?token='+A.token+'&_cb='+Date.now()+'&__g='+c.group):new Image().src='https://vast.integral-marketing.com/api/v1/waterfall/empty'+(D?'2':'')+'?token='+A.token+'&_cb='+Date.now()+'&__g='+c.group,z(A.id)}.bind(q))}));Promise.all(p).then(function(z){console.log(z),queue.loadingAds=0,setTimeout(q.loadAds.bind(q),Math.min(q.maxCycleTimeout,q.timeoutAnchor*(q.cycle/5)))}).catch(function(z){console.log('Promise error '+JSON.stringify(z)),queue.loadingAds=0,setTimeout(q.loadAds.bind(q),Math.min(q.maxCycleTimeout,q.timeoutAnchor*(q.cycle/20)))})}},this.loadAds=function(){if(!this.stage&&(!this.player.adPlaying||this.player.isVPAIDloading())&&!this.loadingAds){this.cycle++;var p=this;if(this.loadingAds=!0,!this.links.loaded){var q=new XMLHttpRequest;q.open('GET','https://vast.integral-marketing.com/api/v1/waterfallex/1?width='+this.options.width+'&height='+this.options.width+'&dnt='+this.options.dnt+'&app_name='+this.options.app.name+'&app_bundle='+this.options.app.bundle+'&idfa='+this.options.device.idfa+'&lon='+this.options.device.lon+'&lat='+this.options.device.lat+'&storeurl='+this.options.app.store_url+'&content_id='+this.options.bid_id+'&content_title='+this.options.app.name+'&content_duration'+this.options.duration+'&url='+this.options.app.bundle+'&app_ver='+this.options.app.ver+'&ua='+encodeURIComponent(navigator.userAgent)+'&ip='+this.options.device.ip+'&content_title='+this.options.app.name+'&url='+this.options.app.bundle+'&cb='+Date.now()+'&country='+this.options.device.country,!0),q.onload=function(){if(4===q.readyState&&200===q.status){var u=new Downloader,v=JSON.parse(q.responseText);p.links.vast.sources=v.filter(function(D){return'VAST'===D.type}),p.links.vpaid.sources=v.filter(function(D){return'VPAID'===D.type});var y=p.links.vpaid.sources.map(function(D){return D.i||0}),z=y.sort(function(D,E){return D-E})[y.length-1],A=1;if(z){for(var B=p.links.vpaid.sources,C=0;C<B.length;C++)B[C].i&&(B[C].s=B[C].r=Math.round(z/B[C].i),A=Math.max(A,B[C].s));if(1===A)for(var C=0;C<B.length;C++)B[C].s*=2,B[C].r*=2}p.links.loaded=!0,p.downloadAdDefinitions()}},q.onerror=function(){p.loadingAds=!1},q.send(null)}else this.downloadAdDefinitions()}else setTimeout(this.loadAds.bind(this),100)},this.downloadVPAIDsDefinitions=function(){if(this.links.vpaid.sources.length||(this.stage=0),this.stage){var p=this.links.vpaid,q=this;if(0<p.sources.length&&5>this.vpaids.length){var t=[],u=null;if(p.randomToPlay?(t=p.sources.filter(function(y){return!y.o&&!y.loaded}),t.length&&(u=t[Math.floor(Math.random()*t.length)]),p.randomToPlay=0,this.stage=0,this.player.vpaidTimeout+=1e3):(t=p.sources.filter(function(y){return y.o&&(!y.loaded||0<y.r)}),t.length?(t.sort(function(y,z){return z.s-y.s}),u=t[0],t[0].r--):p.randomToPlay=1),u){console.log('VPAID - '+u.id);var q=this;new Promise(function(y){q.d.downloadAdDefinition(u,function(z,A,B,C,D){this.links[z.type.toLowerCase()].loaded++,z.loaded=1,new Image().src='https://vast.integral-marketing.com/api/v1/waterfall/opportunity?token='+z.token+'&_cb='+Date.now()+'&__g='+c.group,D?new Image().src='https://vast.integral-marketing.com/api/v1/waterfall/timeout?token='+z.token+'&_cb='+Date.now()+'&__g='+c.group:A?(z.stop=1,new Image().src='https://vast.integral-marketing.com/api/v1/waterfall/error?token='+z.token+'&_cb='+Date.now()+'&__g='+c.group):B?(B.token=z.token,this[B.type.toLowerCase()+'s'].push(B),new Image().src='https://vast.integral-marketing.com/api/v1/waterfall/responded?token='+z.token+'&_cb='+Date.now()+'&__g='+c.group):new Image().src='https://vast.integral-marketing.com/api/v1/waterfall/empty'+(C?'2':'')+'?token='+z.token+'&_cb='+Date.now()+'&__g='+c.group,y(z.id)}.bind(q))}).then(function(){setTimeout(q.downloadVPAIDsDefinitions.bind(q),350),console.log('Done')})}else{for(var v=0;v<p.sources.length;v++)p.sources[v].r=p.sources[v].s,p.sources[v].stop=p.sources[v].loaded=!1;setTimeout(this.downloadVPAIDsDefinitions.bind(this),10)}}else setTimeout(this.downloadVPAIDsDefinitions.bind(this),350)}else setTimeout(this.downloadVPAIDsDefinitions.bind(this),350)},this.downloadVPAIDsDefinitions(),setInterval(function(){if(!this.player.currentVASTAd||this.player.isVPAIDloading()){var p=this.nextAd();p&&(this.player.currentVPAIDAd&&this.player.currentVPAIDAd.vpaid&&(this.player.currentVPAIDAd.vpaid&&this.player.currentVPAIDAd.vpaid.destroy(),this.player.adPlaying=!1,this.player.currentVPAIDAd=null),c.playAd(p))}}.bind(this),1e3)};

var player = new Player(document.getElementsByClassName('im-banner')[0], options.width, options.height, options.bid_id, options.source, options.ad_id); var queue = new Queue(player, 3, 3000, 500, options); queue.loadAds();
